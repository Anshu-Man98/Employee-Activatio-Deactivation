@model EmployeeDeactivation.Models.ManagerApprovalStatus
@using System.Security.Principal
@using System.Security.Claims

<head>

    <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery/jquery-1.8.0.js"></script>
    <script src="https://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.22/jquery-ui.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="~/js/croppie.js"></script>
    <link href="~/css/croppie.css" rel="stylesheet" />
    <script src="~/js/bootbox.js"></script>

    <script type="text/javascript">
        $(document).ready(function () {

            $.ajax({
                type: "GET",
                url: '@Url.Action("GetActivationTaskStatusForManager", "ManagerApproval")',
                dataType: "json",
                success: function (response) {
                    var card = "";
                    var check1 = "";
                    var disable1 = "";
                    var check2 = "";
                    var disable2 = "";
                    var check3 = "";
                    var disable3 = "";
                    var check4 = "";
                    var disable4 = "";
                    var check5 = "";
                    var disable5 = "";
                    var check6 = "";
                    var disable6 = "";
                    var check7 = "";
                    var disable7 = "";
                    var check8 = "";
                    var disable8 = "";
                    var check9 = "";
                    var disable9 = "";

                    $.each(response, function (i, item) {
                        if (item.updateConsolidateIoTResourcesList.trim() == 'false') {
                            check1 = null;
                            disable1 = null;
                        }
                        else {
                            check1 = "checked";
                            disable1 = "disabled";
                        }
                        if (item.birthdayListUpdated.trim() == "false") {
                            check2 = null;
                            disable2 = null;
                        }
                        else {
                            check2 = "checked";
                            disable2 = "disabled";
                            }
                        if (item.emailIdAddedToTeamDL.trim() == "false") {
                            check3 = null;
                            disable3 = null;
                        }
                        else {
                            check3 = "checked";
                            disable3 = "disabled";
                                }
                        if (item.memberAddedToTimesheet.trim() == "false") {
                            check4 = null;
                            disable4 = null;
                        }
                        else {
                            check4 = "checked";
                            disable4 = "disabled";
                        }
                        if (item.initiateHardwareShipmentRequest.trim() == "false") {
                            check5 = null;
                            disable5 = null;
                        }
                        else {
                            check5 = "checked";
                            disable5 = "disabled";
                        }
                        if (item.memberDetailsUpdatedInEDMTTool.trim() == "false") {
                            check6 = null;
                            disable6 = null;
                        }
                        else {
                            check6 = "checked";
                            disable6 = "disabled";
                        }
                        if (item.inductionPlanAssignment.trim() == "false") {
                            check7 = null;
                            disable7 = null;
                        }
                        else {
                            check7 = "checked";
                            disable7 = "disabled";
                        }
                        if (item.inductionTrainingRecordUpdated.trim() == "false") {
                            check8 = null;
                            disable8 = null;
                        }
                        else {
                            check8 = "checked";
                            disable8 = "disabled";
                        }
                        if (item.vivekEcampusListUpdated.trim() == "false") {
                            check9 = null;
                            disable9 = null;
                        }
                        else {
                            check9 = "checked";
                            disable9 = "disabled";
                        }


                        card += "<div class='card'><h3 id='emp" + item.employeeId + "' value='" + item.employeeName + "'>" + item.employeeName + "</h3><ul id='myUL' style='text-align:left'><li>Updated Consolidate IoT Resources List <input class='form-check-input'  type='checkbox' onchange='handleChange1(this)' " + check1 + " " + disable1 + "  id='defaultCheck1" + item.employeeId + "' style='margin-left:80px;'></li><li>Employee Birthday List Updated<input class='form-check-input' type='checkbox' onchange='handleChange2(this)'  " + check2 + " " + disable2 + "  id='defaultCheck2" + item.employeeId + "' style='margin-left:135px;'></li><li>Email-Id added to team/project distribution list <input class='form-check-input' type='checkbox' onchange='handleChange3(this)'  " + check3 + " " + disable3 + "  id='defaultCheck3" + item.employeeId + "' style='margin-left:48px;'></li><li>Member added to timesheet <input class='form-check-input' type='checkbox' onchange='handleChange4(this)'  " + check4 + " " + disable4 + "  id='defaultCheck4" + item.employeeId + "' style='margin-left:157px;'></li><li>Initiated hardware shipment request <input class='form-check-input'  type='checkbox' onchange='handleChange5(this)' " + check5 + " " + disable5 + "  id='defaultCheck5" + item.employeeId + "' style='margin-left:108px;'></li> <li>Member details Updated in EDMT tool <input class='form-check-input'  type='checkbox' onchange='handleChange6(this)' " + check6 + " " + disable6 + "  id='defaultCheck6" + item.employeeId + "' style='margin-left:94px;'></li> <li>Induction plan assignment <input class='form-check-input'  type='checkbox' onchange='handleChange7(this)' " + check7 + " " + disable7 + "  id='defaultCheck7" + item.employeeId + "' style='margin-left:168px;'></li>  <li>Induction training record updated <input class='form-check-input'  type='checkbox' onchange='handleChange8(this)' " + check8 + " " + disable8 + "  id='defaultCheck8" + item.employeeId + "' style='margin-left:126px;'></li>  <li>Ecampus list updated <input class='form-check-input'  type='checkbox' onchange='handleChange9(this)' " + check9 + " " + disable9 + "  id='defaultCheck9" + item.employeeId + "' style='margin-left:196px;'></li> </ul><input type='button' value='submit' class='btn btn-primary'  style='margin-right:5px' id='" + item.employeeId + "' onclick='submit(this.id)'/><input type='hidden' value ='" + item.employeeName + "' id='empName" + item.employeeId + "'><input type='hidden' value ='" + item.timerDate + "' id='timer" + item.employeeId + "'></input><input type='hidden' value ='" + item.activationDate + "' id='actDate" + item.employeeId + "'></input><input type='hidden' value ='" + item.reportingManagerEmail + "' id='reportingEmail" + item.employeeId + "'><input type='hidden' value ='" + item.employeeEmail + "' id='empEmail" + item.employeeId + "'></input><input type='hidden' value ='" + item.fromEmail + "' id='fromEmail" + item.employeeId + "'></input></input></input><input type='hidden' value ='" + item.employeeId + "' id='empId" + item.employeeId + "'></input><input type='hidden' value ='" + item.updateConsolidateIoTResourcesList + "' id='checkbox1" + item.employeeId + "'></input><input type='hidden' value ='" + item.birthdayListUpdated + "' id='checkbox2" + item.employeeId + "'></input><input type='hidden' value ='" + item.emailIdAddedToTeamDL + "' id='checkbox3" + item.employeeId + "'></input><input type='hidden' value ='" + item.memberAddedToTimesheet + "' id='checkbox4" + item.employeeId + "'></input> <input type='hidden' value ='" + item.initiateHardwareShipmentRequest + "' id='checkbox5" + item.employeeId + "'></input> <input type='hidden' value ='" + item.memberDetailsUpdatedInEDMTTool + "' id='checkbox6" + item.employeeId + "'></input> <input type='hidden' value ='" + item.inductionPlanAssignment + "' id='checkbox7" + item.employeeId + "'></input> <input type='hidden' value ='" + item.inductionTrainingRecordUpdated + "' id='checkbox8" + item.employeeId + "'></input> <input type='hidden' value ='" + item.vivekEcampusListUpdated + "' id='checkbox9" + item.employeeId + "'></input></div>";


                    });
                    $("#cards").append(card);

                }
            })
        });


  

        var checkbox1 = "";
        var checkbox2 = "";
        var checkbox3 = "";
        var checkbox4 = "";
        var checkbox5 = "";
        var checkbox6 = "";
        var checkbox7 = "";
        var checkbox8 = "";
        var checkbox9 = "";
        function handleChange1(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox1 = "true";
            }
            else {
                checkbox1 = "false";
            }
        }
        function handleChange2(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox2 = "true";
            } else {
                checkbox2 = "false";
            }
        }
        function handleChange3(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox3 = "true";
            } else {
                checkbox3 = "false";
            }
        }
        function handleChange4(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox4 = "true";
            } else {
                checkbox4 = "false";
            }
        }
        function handleChange5(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox5 = "true";
            } else {
                checkbox5 = "false";
            }
        }
        function handleChange6(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox6 = "true";
            } else {
                checkbox6 = "false";
            }
        }
        function handleChange7(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox7 = "true";
            } else {
                checkbox7 = "false";
            }
        }
        function handleChange8(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox8 = "true";
            } else {
                checkbox8 = "false";
            }
        }
        function handleChange9(checkbox) {
            if (checkbox.checked == true || checkbox.disabled == true) {
                checkbox9 = "true";
            } else {
                checkbox9 = "false";
            }
        }




        function submit(clicked) {

            var UpdateConsolidateIoTResourcesList = "";
            var BirthdayListUpdated = "";
            var EmailIdAddedToTeamDL = "";
            var MemberAddedToTimesheet = "";
            var InitiateHardwareShipmentRequest = "";
            var MemberDetailsUpdatedInEDMTTool = "";
            var InductionPlanAssignment = "";
            var InductionTrainingRecordUpdated = "";
            var VivekEcampusListUpdated = "";

            if ($('#checkbox1' + clicked).val().trim() == "true" || checkbox1 == "true") {
                UpdateConsolidateIoTResourcesList = "true";
            } else {
                UpdateConsolidateIoTResourcesList = "false";
            }
            if ($('#checkbox2' + clicked).val().trim() == "true" || checkbox2 == "true") {
                BirthdayListUpdated = "true";
            } else {
                BirthdayListUpdated = "false";
            }
            if ($('#checkbox3' + clicked).val().trim() == "true" || checkbox3 == "true") {
                EmailIdAddedToTeamDL = "true";
            } else {
                EmailIdAddedToTeamDL = "false";
            }
            if ($('#checkbox4' + clicked).val().trim() == "true" || checkbox4 == "true") {
                MemberAddedToTimesheet = "true";
            } else {
                MemberAddedToTimesheet = "false";
            }
            if ($('#checkbox5' + clicked).val().trim() == "true" || checkbox5 == "true") {
                InitiateHardwareShipmentRequest = "true";
            } else {
                InitiateHardwareShipmentRequest = "false";
            }
            if ($('#checkbox6' + clicked).val().trim() == "true" || checkbox6 == "true") {
                MemberDetailsUpdatedInEDMTTool = "true";
            } else {
                MemberDetailsUpdatedInEDMTTool = "false";
            }
            if ($('#checkbox7' + clicked).val().trim() == "true" || checkbox7 == "true") {
                InductionPlanAssignment = "true";
            } else {
                InductionPlanAssignment = "false";
            }
            if ($('#checkbox8' + clicked).val().trim() == "true" || checkbox8 == "true") {
                InductionTrainingRecordUpdated = "true";
            } else {
                InductionTrainingRecordUpdated = "false";
            }
            if ($('#checkbox9' + clicked).val().trim() == "true" || checkbox9 == "true") {
                VivekEcampusListUpdated = "true";
            } else {
                VivekEcampusListUpdated = "false";
            }

            fileData = new FormData();
            fileData.append('EmployeeId', $('#empId' + clicked).val());
            fileData.append('EmployeeName', $('#empName' + clicked).val());
            fileData.append('TimerDate', $('#timer' + clicked).val());
            fileData.append('ActivationDate', $('#actDate' + clicked).val());
            fileData.append('ReportingManagerEmail', $('#reportingEmail' + clicked).val());
            fileData.append('UpdateConsolidateIoTResourcesList', UpdateConsolidateIoTResourcesList);
            fileData.append('BirthdayListUpdated', BirthdayListUpdated);
            fileData.append('EmailIdAddedToTeamDL', EmailIdAddedToTeamDL);
            fileData.append('MemberAddedToTimesheet', MemberAddedToTimesheet);
            fileData.append('InitiateHardwareShipmentRequest', InitiateHardwareShipmentRequest);
            fileData.append('MemberDetailsUpdatedInEDMTTool', MemberDetailsUpdatedInEDMTTool);
            fileData.append('InductionPlanAssignment', InductionPlanAssignment);
            fileData.append('InductionTrainingRecordUpdated', InductionTrainingRecordUpdated);
            fileData.append('VivekEcampusListUpdated', VivekEcampusListUpdated);
            fileData.append('EmployeeEmail', $('#empEmail' + clicked).val());
            fileData.append('FromEmail', $('#fromEmail' + clicked).val());
            $.ajax({
                type: "POST",
                url: '@Url.Action("AddActivationTaskToDatabase", "ManagerApproval")',
                data: fileData,
                processData: false,
                contentType: false,
                success: function (stream) {
                    window.location.reload();
                    bootbox.alert("Updated sucessfully!");

                }
            });
        }

    </script>

    <style>
        .header {
            width: 100%;
            margin-top: 0px;
            padding: 20px;
            margin-bottom: 5px;
            text-align: center;
            background-color: black;
            color: white;
            font-size: 30px;
        }

        .div2 {
            width: 300px;
            height: 300px;
            padding: 50px;
            border: 1px solid red;
            align-content: center;
            margin-left: 35%;
        }

        body {
            background-color: whitesmoke;
            text-align: center;
        }

        .card {
            background: #fff;
            border-radius: 2px;
            display: inline-block;
            height: 350px;
            margin: 1rem;
            position: relative;
            width: 400px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);
            transition: all 0.3s cubic-bezier(.25,.8,.25,1);
        }

            .card:hover {
                box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
            }

        #backButton {
            margin-left: 55px;
            background-color: gray;
            color: whitesmoke;
        }
    </style>


</head>

<body id="cards">
    <div class="header">
        <h2>Activation Status</h2>
    </div>
</body>

